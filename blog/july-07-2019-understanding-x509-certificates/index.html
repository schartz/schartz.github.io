<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="description" content="I needed an obligatory &#039;my corner of Internet&#039;, so here it is.">

        <meta property="og:title" content="X.509 Certificates Explained | Schartz&#039;s"/>
        <meta property="og:type" content="website" />
        <meta property="og:url" content="/blog/july-07-2019-understanding-x509-certificates"/>
        <meta property="og:description" content="I needed an obligatory &#039;my corner of Internet&#039;, so here it is." />

        <title>Schartz&#039;s | X.509 Certificates Explained</title>

        <link rel="home" href="">
        <link rel="icon" href="/favicon.ico">
        <link href="/blog/feed.atom" type="application/atom+xml" rel="alternate" title="Schartz&#039;s Atom Feed">

            <meta property="og:title" content="X.509 Certificates Explained" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="/blog/july-07-2019-understanding-x509-certificates"/>
    <meta property="og:description" content="This is your first blog post." />

        
        <link href="https://fonts.googleapis.com/css?family=Nunito+Sans:300,300i,400,400i,700,700i,800,800i" rel="stylesheet">
        <link rel="stylesheet" href="/assets/build/css/main.css?id=48f60b09a0a946a4df96">
    </head>

    <body class="flex flex-col justify-between min-h-screen bg-grey-lightest text-grey-darkest leading-normal font-sans">
        <header class="flex items-center shadow bg-white border-b h-24 py-4" role="banner">
            <div class="container flex items-center max-w-4xl mx-auto px-4 lg:px-8">
                <div class="flex items-center">
                    <a href="/" title="Schartz&#039;s home" class="inline-flex items-center">
                        <img class="h-8 md:h-10 mr-3" src="/assets/img/logo.svg" alt="Schartz&#039;s logo" />

                        <h1 class="text-lg md:text-2xl text-blue-darkest font-semibold hover:text-blue-dark my-0">Schartz&#039;s</h1>
                    </a>
                </div>

                <div id="vue-search" class="flex flex-1 justify-end items-center">
                    <search></search>

                    <nav class="hidden lg:flex items-center justify-end text-lg">
    <a title="Schartz&#039;s Blog" href="/blog"
        class="ml-6 text-grey-darker hover:text-blue-dark ">
        Blog
    </a>

    <a title="Schartz&#039;s About" href="/about"
        class="ml-6 text-grey-darker hover:text-blue-dark ">
        About
    </a>

    <a title="Schartz&#039;s Resume" href="/resume" target="_blank"
        class="ml-6 text-grey-darker hover:text-blue-dark ">
        Resume
    </a>
</nav>

                    <button class="flex justify-center items-center bg-blue border border-blue h-10 px-5 rounded-full lg:hidden focus:outline-none"
    onclick="navMenu.toggle()"
>
    <svg id="js-nav-menu-show" xmlns="http://www.w3.org/2000/svg"
        class="fill-current text-white h-9 w-4" viewBox="0 0 32 32"
    >
        <path d="M4,10h24c1.104,0,2-0.896,2-2s-0.896-2-2-2H4C2.896,6,2,6.896,2,8S2.896,10,4,10z M28,14H4c-1.104,0-2,0.896-2,2  s0.896,2,2,2h24c1.104,0,2-0.896,2-2S29.104,14,28,14z M28,22H4c-1.104,0-2,0.896-2,2s0.896,2,2,2h24c1.104,0,2-0.896,2-2  S29.104,22,28,22z"/>
    </svg>

    <svg id="js-nav-menu-hide" xmlns="http://www.w3.org/2000/svg"
        class="hidden fill-current text-white h-9 w-4" viewBox="0 0 36 30"
    >
        <polygon points="32.8,4.4 28.6,0.2 18,10.8 7.4,0.2 3.2,4.4 13.8,15 3.2,25.6 7.4,29.8 18,19.2 28.6,29.8 32.8,25.6 22.2,15 "/>
    </svg>
</button>

                </div>
            </div>
        </header>

        <nav id="js-nav-menu" class="nav-menu hidden lg:hidden">
    <ul class="list-reset my-0">
        <li class="pl-4">
            <a
                title="Schartz&#039;s Blog"
                href="/blog"
                class="nav-menu__item hover:text-blue "
            >Blog</a>
        </li>
        <li class="pl-4">
            <a
                title="Schartz&#039;s About"
                href="/about"
                class="nav-menu__item hover:text-blue "
            >About</a>
        </li>
        <li class="pl-4">
            <a
                title="Schartz&#039;s Resume"
                href="/resume"
                target="_blank"
                class="nav-menu__item hover:text-blue "
            >Resume</a>
        </li>
    </ul>
</nav>

        <main role="main" class="flex-auto w-full container max-w-xl mx-auto py-16 px-6">
                        <img src="/assets/img/posts/cert.svg" alt="X.509 Certificates Explained cover image" class="mb-2">
    
    <h1 class="leading-none mb-2">X.509 Certificates Explained</h1>

    <p class="text-grey-darker text-xl md:mt-0">Schartz Rehan  •  July 6, 2019</p>

    
    <div class="border-b border-blue-lighter mb-10 pb-4 post-content" v-pre>
        <p>To put it simply, X.509 certificate is a digital document encoded and/or
digitally signed according to <a href="https://tools.ietf.org/html/rfc5280">RFC 5280</a></p>
<p>Generally speaking <em>X.509 certificate</em> refers to IETF's(Internet Engineering Task Force) PKIX certificate
and CRL profile of the X.509 certificate v3 standard. Yes there are versions of this thing.
This version is specified in <a href="https://tools.ietf.org/html/rfc5280">RFC 5280</a>. It is also known as PKIX, full form being &quot;<em>Public Key Infrastructure (X.509)</em>&quot;</p>
<h3>X509 File types</h3>
<p>There are a bunch of file type names being thrown around X.509. Occasionally and incorrectly it is said that they are all interchangeable.
While in come cases they may be interchangeable. It is always better to know your certificates and label them accordingly.  </p>
<h4>Encodings (may be used as file extensions on Windows systems)</h4>
<ul>
<li>
<p>.DER = The DER extension is used for binary DER encoded certificates. These files may also bear the CER or the CRT extension.
It would be better to say that &quot;<strong>This is a DER encoded certificate</strong>&quot; rather than &quot;This is DER certificate&quot;.</p>
</li>
<li>
<p>.PEM = The PEM extension is used for X.509v3 files which contain ASCII (Base64) encoded data prefixed with a &quot;—–
BEGIN ...&quot; type of line.</p>
<h4>Common file extensions</h4>
</li>
<li>
<p>CRT = The CRT extension is used for certificates. The certificates may be encoded as binary DER or as ASCII PEM. The CER and
CRT extensions are nearly synonymous. Most common among *nix systems</p>
</li>
<li>
<p>CER = alternate form of .crt (Microsoft Convention) You can use MS to convert .crt to .cer (.both DER encoded .cer, or base64[PEM]
encoded .cer) The .cer file extension is also recognized by IE as a command to run a MS cryptoAPI command (specifically
rundll32.exe cryptext.dll,CryptExtOpenCER) which displays a dialogue for importing and/or viewing certificate contents.</p>
</li>
<li>
<p>.KEY = The KEY extension is used both for public and private PKCS#8 keys. The keys may be encoded as binary DER or as ASCII
PEM.  </p>
</li>
</ul>
<p>The only time CRT and CER can safely be interchanged is when the encoding type can be identical. (ie PEM encoded CRT = PEM encoded
CER)  </p>
<h4>Basic OpenSSL Certificate Operations</h4>
<p>There are four basic types of certificate manipulations. View, Transform, Combination , and Extraction</p>
<p>To view PEM encoded certificates</p>
<pre><code class="language-bash">openssl x509 -in certfile -text noout</code></pre>
<p>Here <code>certfile</code> can have any of the above mentioned encodings. Following error might occur:</p>
<pre><code class="language-bash">unable to load certificate
12626:error:0906D06C:PEM routines:PEM_read_bio:no start line:pem_lib.c:647:Expecting: TRUSTED CERTIFICATE</code></pre>
<p>This typically means that you are trying to read a certificate which is in DER format.<br />
To view a certificate use following</p>
<pre><code class="language-bash">openssl x509 -in certfile -inform der -text -noout</code></pre>
<p>You will encounter following error if you try to run above command on PEM encoded certificate:</p>
<pre><code class="language-bash">unable to load certificate
13978:error:0D0680A8:asn1 encoding routines:ASN1_CHECK_TLEN:wrong tag:tasn_dec.c:1306:
13978:error:0D07803A:asn1 encoding routines:ASN1_ITEM_EX_D2I:nested asn1 error:tasn_dec.c:380:Type=X509</code></pre>
<p>PEM to DER can be transformed like following</p>
<pre><code class="language-bash">openssl x509 -in certfile -outform der -out cert.der</code></pre>
<p>Similarly DER to PEM can be transformed like following</p>
<pre><code class="language-bash">openssl x509 -in certfile -inform der -outform pem -out cert.pem</code></pre>
<h4>Combining X.509 certificate components</h4>
<p>In some cases it is advantageous to combine multiple pieces of the X.509 infrastructure into a single file. One common example would be to
combine both the private key and public key into the same certificate.
The easiest way to combine certs keys and chains is to convert each to a PEM encoded certificate then simple copy the contents of each file
into a new file. This is suitable for combining files to use in a number of applications.  </p>
<p>Quite often you will come across a file with .p12 extensions.<br />
This type of file uses that uses PKCS#12 (Public Key Cryptography Standard #12) encryption.<br />
It is typically used as a portable format for transferring personal private keys or other sensitive information.<br />
It is also used by various security and encryption programs.</p>
<h4>Extracting components from certificates</h4>
<p>An X.509 certificate contains ONLY the public key and NEVER contains a private key.<br />
To extract the public key from it use following</p>
<pre><code class="language-bash">openssl x509 -pubkey -noout -in certfile.pem</code></pre>
<p>To calculate fingerprint/thumbprint/hash/signature of X.509 certificate in SHA256 use following</p>
<pre><code>openssl x509 -noout -fingerprint -sha256 -inform pem -in certfile.pem</code></pre>
<p>To calculate fingerprint/thumbprint/hash/signature of public key of X.509 certificate in SHA256 use following</p>
<pre><code>openssl x509 -in certfile.pem -pubkey -noout | grep -v '^-' | base64 -d | openssl sha256</code></pre>
<p>If you have your certificate in DER encoding, simple add <code>-inform der</code> to above commands accordingly.</p>    </div>

    <nav class="flex justify-between text-sm md:text-base">
        <div>
                            <a href="/blog/june-2-2019-the-shape-of-tensor" title="Older Post: The Shape of Tensor">
                    &LeftArrow; The Shape of Tensor
                </a>
                    </div>

        <div>
                    </div>
    </nav>
        </main>

        <footer class="bg-white text-center text-sm mt-12 py-4" role="contentinfo">
            <ul class="flex flex-col md:flex-row justify-center list-reset">
                <li class="md:mr-2">
                    &copy; 2019. Some rights reserved.
                </li>

                <li>
                    Built with <a href="http://jigsaw.tighten.co" title="Jigsaw by Tighten">Jigsaw</a>
                    and <a href="https://tailwindcss.com" title="Tailwind CSS, a utility-first CSS framework">Tailwind CSS</a>.
                </li>
            </ul>
        </footer>

        <script src="/assets/build/js/main.js?id=ecff99b3948a67b9c95f"></script>

        <script>
    const navMenu = {
        toggle() {
            const menu = document.getElementById('js-nav-menu');
            menu.classList.toggle('hidden');
            menu.classList.toggle('lg:block');
            document.getElementById('js-nav-menu-hide').classList.toggle('hidden');
            document.getElementById('js-nav-menu-show').classList.toggle('hidden');
        },
    }
</script>
    </body>
</html>
